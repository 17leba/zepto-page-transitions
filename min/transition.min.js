$(document).ready(function(){$(document.body).transition().show()});
(function(b){var i=0,n=!1;window.location.href.slice(0,window.location.href.lastIndexOf("/")+1);var k=null,l={},p=window.location.href,f=null,q={},m=[],j={options:function(a){k=b.extend({defaultPageTransition:"fade",cachePages:!1},a)},init:function(a,c){n||(n=!0,b(document.body).transition("options",{}),b(window).on("hashchange",function(){var a=f||b(document.body);if(!q[window.location.hash]){var c=window.location.hash;f&&f.is("form")&&(c={type:f.attr("method")||"get",url:window.location.hash.slice(1),
data:f.serialize(),dataType:"html",global:!1});a.transition("changePage",c,null==f)}f=null}));var d=b('div[data-role="page"]',this);d.length||(this.is("div")?(this.attr("data-role","page"),this.attr("id","_trans_div"+i),d=this):(d=b('<div data-role="page" id="_trans_div'+i+'" />'),this.children().wrapAll(d)));a&&d.trigger("pageload",a);if(window.location.hash){var e=d.first().attr("id"),h;h=(l[window.location.hash]||window.location.hash.slice(1)).replace(/[:\.\+\/]/g,"_");d.first().attr("id",h);e&&
(b('[data-href="#'+e+'"]',d).attr("data-href","#"+h),b('[href="#'+e+'"]',d).attr("href","#"+h))}d.attr("style","position: absolute; width: 100%; height: 100%; left: 0px; top: 0px;");d.each(function(){b(this).attr("id")||b(this).attr("id","_trans_div"+i);l["#"+b(this).attr("id")]=p;b(this).css("zIndex",i++)});b("a[href]",d).not("[target]").not('[rel="external"]').not("[data-href]").transition("hijackLinks");b("[data-href]",d).transition("hijackLinks");b("form").not("[target]").not('[data-ajax="false"]').transition("hijackLinks");
d.hide();e=(e=c?b(c):null)||d.first();e.addClass("ui-page-active");d.trigger("pageinit");return e},hijackLinks:function(){return this.each(function(){var a=b(this),c=a.attr("data-href")||a.attr("href")||a.attr("action")||"#";if("#"===c.charAt(0)){if(b('a[name="'+c.slice(1)+'"]').length){q[c]=!0;return}}else c="#"+c,a.is("a")?a.attr("href",c):a.attr("action")&&a.attr("action",c),a.attr("data-href")&&a.attr("data-href",c);var d;a.is("a")?d=function(){f=a}:a.is("form")?(d=function(b){f=a;window.location.href=
c;b.preventDefault()},a.on("submit",d)):d=function(){f=a;window.location.href=c};a.is("form")||(a.on("click",d),a.on("tap",d))})},changePage:function(a,c){var d=null;if(c&&m.length)d=m.pop().transition;else if(d=b(this).attr("transition")||b(this).data("transition")||k.defaultPageTransition,!c&&(m.push({href:window.location.pathname,transition:d}),"reverse"===(b(this).attr("direction")||b(this).data("direction"))))c=!0;var e="string"===typeof a?a:a.url,h=null,g=b("div.ui-page-active"),f=!1;if("string"===
typeof a&&"#"===a.charAt(0)){var i=b(a.replace(/[:\.\+\/]/g,"_"));i.length?(b(document.body).transition("perform",g,i,d,c),f=!0):!k.cachePages&&l[a]?(h=a,a=l[a]):a=a.slice(1)}if(!f){var j={href:e,element:b(this),back:c},e=b.Event("pagebeforeload");b(this).trigger(e,j);e.defaultPrevented||(b(this).transition("load",a,j,function(a){var e=b("<div />");e.html(a);b(document.body).append(e);a=b(e).transition("init",j,h);b(document.body).transition("perform",g,a,d,c)}),f=!0)}return!f},load:function(a,c,
d){a="string"===typeof a?{url:a,dataType:"html",global:!1}:a;a.url||(a.url=window.location.href);a.success=function(e,h,g){c.xhr=g;c.textStatus=h;p=a.url;k.cachePages||b('div[data-role="page"]').addClass("transition-recyclable");g=e.search(/<body/i);h=e;-1!=g&&(g=e.indexOf(">",g),bodyEnd=e.search(/<\/body>/i),h=e.slice(g+1,bodyEnd));if(window.location.hash&&(g=window.location.hash.lastIndexOf("/"),-1!=g)){var f=window.location.hash.slice(1,g+1),h=h.replace(/(\b(src|href|action))="([^"#:]+)"/gi,'$1="'+
f+'$3"');do var g=f.lastIndexOf("/",g-2)+1,i='(\\b(src|href|action))="'+f.slice(g)+"../",f=f.slice(0,g),h=h.replace(RegExp(i,"gi"),'$1="');while(0<g)}d(h,e)};a.error=function(a,d,f){c.xhr=a;c.textStatus=d;c.errorThrown=f;b(document.body).trigger("pageloadfailed",c)};b.ajax(a)},perform:function(a,c,d,e){a.trigger("pagebeforehide",a);c.trigger("pagebeforeshow",c);window.setTimeout(function(){a.addClass(d+" out");a.removeClass("ui-page-active");c.show();c.addClass(d+" in");c.addClass("ui-page-active");
e&&(a.addClass("reverse"),c.addClass("reverse"))},1);window.setTimeout(function(){a.removeClass(d+" out");c.removeClass(d+" in");a.removeClass("reverse");c.removeClass("reverse");a.trigger("pagehide",a);c.trigger("pageshow",c);b('div[data-role="page"]').hide();c.show();k.cachePages||(b("div.transition-recyclable").each(function(){var a=b.Event("pageremove");b(this).trigger(a,b(this));a.defaultPrevented||b(this).remove()}),b("div").not("[id]").not(function(){return b(this).children().length}).remove())},
707)}};b.fn.transition=function(a){if(j[a])return j[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return j.init.apply(this,arguments);b.error("Method "+a+" does not exist")}})(Zepto);
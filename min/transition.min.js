$(document).ready(function(){$(document.body).transition().show()});
(function(b){var k=0,r=!1;window.location.href.slice(0,window.location.href.lastIndexOf("/")+1);var l=null,n={},s=window.location.href,e=null,t={},p=[],q={options:function(a){l=b.extend({defaultPageTransition:"fade",domCache:!1},a)},init:function(a,c,f){r||(r=!0,b(document.body).transition("options",{}),b(window).on("hashchange",function(){var a=e||b(document.body);if(!t[window.location.hash]){var c=window.location.hash;e&&e.is("form")&&(c={type:e.attr("method")||"get",url:window.location.hash.slice(1),
data:e.serialize(),dataType:"html",global:!1});a.transition("changePage",c,null==e)}e=null}));var d=b('div[data-role="page"]',this);d.length||(this.is("div")?(this.attr("data-role","page"),this.attr("id","_trans_div"+k),d=this):(d=b('<div data-role="page" id="_trans_div'+k+'" />'),this.children().wrapAll(d)));a&&d.trigger("pageload",a);if(window.location.hash){var a=d.first().attr("id"),i;i=(n[window.location.hash]||window.location.hash.slice(1)).replace(/[:\.\+\/]/g,"_");d.first().attr("id",i);a&&
(b('[data-href="#'+a+'"]',d).attr("data-href","#"+i),b('[href="#'+a+'"]',d).attr("href","#"+i))}d.attr("style","position: absolute; width: 100%; height: 100%; left: 0px; top: 0px;");d.each(function(){b(this).attr("id")||b(this).attr("id","_trans_div"+k);n["#"+b(this).attr("id")]=s;b(this).css("zIndex",k++)});b("a[href]",d).not("[target]").not('[rel="external"]').not('[data-ajax="false"]').not("[data-href]").transition("hijackLinks");b("[data-href]",d).transition("hijackLinks");b("form").not("[target]").not('[data-ajax="false"]').transition("hijackLinks");
f||(f=document.title);d.not("[data-title]").data("title",f);d.hide();c=(c=c?b(c):null)||d.first();c.addClass("ui-page-active");d.trigger("pageinit");return c},hijackLinks:function(){return this.each(function(){var a=b(this);if("back"==a.data("rel")){var c=function(a){window.history.back();a.preventDefault()};a.on("click",c);a.on("tap",c)}else{var f=a.attr("data-href")||a.attr("href")||a.attr("action")||"#";if("#"===f.charAt(0)){if(b('a[name="'+f.slice(1)+'"]').length){t[f]=!0;return}}else f="#"+f,
a.is("a")?a.attr("href",f):a.attr("action")&&a.attr("action",f),a.attr("data-href")&&a.attr("data-href",f);a.is("a")?c=function(){e=a}:a.is("form")?(c=function(b){e=a;window.location.href=f;b.preventDefault()},a.on("submit",c)):c=function(){e=a;window.location.href=f};a.is("form")||(a.on("click",c),a.on("tap",c))}})},changePage:function(a,c){var f={toPage:a,back:c},d=b.Event("pagebeforechange");b(this).trigger(d,f);if(!d.defaultPrevented){var a=f.toPage,c=f.back,i=null;if(c&&p.length)i=p.pop().transition;
else if(i=b(this).attr("transition")||b(this).data("transition")||l.defaultPageTransition,!c&&(p.push({href:window.location.pathname,transition:i}),"reverse"===(b(this).attr("direction")||b(this).data("direction"))))c=!0;var d="string"===typeof a?a:a.url,g=null,u=b("div.ui-page-active"),e=!1;if("string"===typeof a&&"#"===a.charAt(0)){var j=b(a.replace(/[:\.\+\/]/g,"_"));j.length?(b(this).transition("perform",u,j,i,c,f),e=!0):!l.domCache&&n[a]?(g=a,a=n[a]):a=a.slice(1)}if(!e){var h={href:d,element:b(this),
back:c},d=b.Event("pagebeforeload");b(this).trigger(d,h);var m=b(this);d.defaultPrevented||(b(this).transition("load",a,h,function(a,d,e){d=b("<div />");d.html(a);b(document.body).append(d);a=b(d).transition("init",h,g,e);b(m).transition("perform",u,a,i,c,f)}),e=!0)}e||b(this).trigger("pagechangefailed",f)}},load:function(a,c,f){a="string"===typeof a?{url:a,dataType:"html",global:!1}:a;a.url||(a.url=window.location.href);a.success=function(d,i,g){c.xhr=g;c.textStatus=i;s=a.url;l.domCache||b('div[data-role="page"]').not('[data-dom-cache="true"]').addClass("transition-recyclable");
var g=d.search(/<body/i),e=d,i=d,k;-1!=g&&(e=d.slice(0,g),g=d.indexOf(">",g),bodyEnd=d.search(/<\/body>/i),i=d.slice(g+1,bodyEnd));(g=e.match(/<title>(.+)<\/title>/im))&&(k=g[1]);if(window.location.hash){var g=window.location.pathname,j=window.location.hash.slice(1),e="",h=j.lastIndexOf("/");if(-1!=h&&(e=j.slice(0,h+1),"/"==e.charAt(0))){"/"==!g.charAt(0)&&(g="/"+g);h=j=1;do h=e.indexOf("/",h)+1,h>j&&e.slice(0,h)==g.slice(0,h)&&(j=h);while(0<h&&h==j);var m="",h=j;do h=g.indexOf("/",h+1),-1!=h&&(m+=
"../");while(-1!=h);e=m+e.slice(j)}g=e;g.length&&(i=i.replace(/(\b(src|href|action))="([^"#:]+)"/gi,'$1="'+g+'$3"'))}f(i,d,k)};a.error=function(d,e,f){c.xhr=d;c.textStatus=e;c.errorThrown=f;b(this).trigger("pageloadfailed",c);b(this).trigger("pagechangefailed",{toPage:a.url})};b.ajax(a)},perform:function(a,c,e,d,i){a.trigger("pagebeforehide",a);c.trigger("pagebeforeshow",c);window.setTimeout(function(){a.addClass(e+" out");a.removeClass("ui-page-active");c.show();c.addClass(e+" in");c.addClass("ui-page-active");
d&&(a.addClass("reverse"),c.addClass("reverse"))},1);window.setTimeout(function(){a.removeClass(e+" out");c.removeClass(e+" in");a.removeClass("reverse");c.removeClass("reverse");var d=c.data("title");d&&(document.title=d);a.trigger("pagehide",a);c.trigger("pageshow",c);b(this).trigger("pagechange",i);b('div[data-role="page"]').hide();c.show();l.domCache||(b("div.transition-recyclable").each(function(){var a=b.Event("pageremove");b(this).trigger(a,b(this));a.defaultPrevented||b(this).remove()}),b("div").not("[id]").not(function(){return b(this).children().length}).remove())},
707)}};b.fn.transition=function(a){if(q[a])return q[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return q.init.apply(this,arguments);throw"Method "+a+" does not exist";}})(Zepto);